# content-filter-browser-extension
Расширение создано для блокировки "время пожирающих сайтов", чтобы сохранять внимание и продуктивность

## Идеи
Механизм слов-веса не идеален, но он прост и дешёв. Возможно потом по мере развития Data science части мы перейдём на что-то лучшие, но пока для нас сложно даже создать слова-веса, хотя механизм уже есть и мы можем это делать
Будет куча ложноположительных, ложноотрицательных блокировок - надо найти оптиум в том числе и для пользователя

Нужно найти нишу, что конкретно мы будем закрывать. Для меня когда-то это расширение было дополнение к решению от SkyDNS, т.к у них очень большой и классные белые и чёрные списки, но если перебрать 10 сайтов с аниме найти рабочие можно. Cold Turkey идеален для разбора url адресов, поэтому это не наша ниша

Думаю нам нужно сконцентрироватся на таком типо инструменте для фокуса, например на неделю у тебя заблокированы книги, музыка,видео и т.п. А вот блокировку "не подходящего для работы контента"  мы наверное полностью забьём. Или надо ? Потому что это позволит занять нишу родительского контроля. Но детям возможно хватает уже существующих решений
## История создания
Основано на другом расширении, которое блокирует не подходящий для работы контент, но оно было полностью переписано на манифест 3 и из-за этого кода из этого расширения уже нету. Осталась только сама архитектура и логика приложения, Были добавлены новые ф-и и закрыты баги

## Версии
1.1.0.4 - версия имеет механизмы:
1) Блокировки сайтов по механизму слов-веса, если на сайте найдены слова из списка(настроек), и их веса в сумме превышают лимит, сайт блокируется
2) Сайты до проверки скрываются от пользователя(Сделано, чтобы они не показывались, если процессор нагружен и проверка останавливается)
3) Если сайт на не ru или en языке, то он блокируется
4) Блокируется воспроизведение видео на сайтах не из белого списка
5) Также версия WORKSPACE, а значит в ней пока что не реализованы ручные настройки, т.к пользователь легко бы мог их изменить

## Работа расширения
Основной файл инициализации расширения - manifest.json, там в json формате по сути написано какие скрипты где должны запускаться

background.js - связующие звено между всеми скриптами, прослушивает сообщения с разных источников

blockpage.html - страница блокировки 
blockpage.js - тут получаем от background информацию отладки

content_end.js - реализует получение внутренего текста страницы и показ страницы, загружается в конце, когда doc доступен
content_start.css
content_start.js - скрывает страницу до сканирования с помощью применения content_start.css
content_start_blocking_video.js - скрипт отправляет сообщение на background, чтобы понять есть ли сайт в белом списке, иначе блокирует загрузку видео

options.css
options.html - пользовательские настройки, сейчас заглушка
options.js - позволяет получать ввод от пользователя и сохранять настройки

preset.json - пресет для настроек, его получаем с data science части, но возможно его стоит разбить по категориям, чтобы пользователь в настройках мог выбрать какая ему нужна
settings.js - классы Settings и Cache для взаимодействия с ними и с хранилещем браузера
style.css - общие стили расширения